# ğŸ–¼ï¸ å¥–å“å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½è¯´æ˜

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

æ–°å¢äº†**å¥–å“å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½**ï¼Œç®¡ç†å‘˜åœ¨åˆ›å»ºæŠ½å¥–æ—¶å¯ä»¥é€‰æ‹©æ€§ä¸Šä¼ å¥–å“å›¾ç‰‡ï¼ˆéå¿…å¡«ï¼‰ã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **æ˜¯å¦å¿…å¡«** | âŒ å¦ï¼ˆå¯é€‰å­—æ®µï¼‰ |
| **æ”¯æŒæ ¼å¼** | âœ… jpgã€pngã€jpegã€gif ç­‰æ‰€æœ‰å›¾ç‰‡æ ¼å¼ |
| **æ–‡ä»¶å¤§å°é™åˆ¶** | âœ… æœ€å¤§ 5MB |
| **å›¾ç‰‡é¢„è§ˆ** | âœ… ä¸Šä¼ å‰æœ¬åœ°é¢„è§ˆ |
| **åˆ—è¡¨æ˜¾ç¤º** | âœ… æŠ½å¥–åˆ—è¡¨ä¸­æ˜¾ç¤ºç¼©ç•¥å›¾ï¼ˆ60x60ï¼‰ |
| **è¯¦æƒ…æ˜¾ç¤º** | âœ… æŠ½å¥–è¯¦æƒ…ä¸­æ˜¾ç¤ºå¤§å›¾ï¼ˆ150x150ï¼Œå¯ç‚¹å‡»æ”¾å¤§ï¼‰ |
| **é€šçŸ¥æºå¸¦** | âœ… å¼€å¥–æ—¶å¦‚æœæœ‰å›¾ç‰‡ï¼Œä¼šå‘é€å›¾ç‰‡åˆ° Telegram |

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### 1ï¸âƒ£ **åˆ›å»ºæŠ½å¥–æ—¶ä¸Šä¼ **

åœ¨"åˆ›å»ºæŠ½å¥–"é¡µé¢ï¼Œå¥–å“åç§°ä¸‹æ–¹æœ‰"å¥–å“å›¾ç‰‡"ä¸Šä¼ åŒºåŸŸï¼š

- ç‚¹å‡»è™šçº¿æ¡†é€‰æ‹©å›¾ç‰‡
- ä¸Šä¼ åä¼šæ˜¾ç¤ºé¢„è§ˆ
- æ”¯æŒ jpgã€png ç­‰å¸¸è§æ ¼å¼
- å¤§å°ä¸è¶…è¿‡ 5MB
- **éå¿…å¡«é¡¹**ï¼Œå¯ä»¥ä¸ä¸Šä¼ 

### 2ï¸âƒ£ **æŠ½å¥–åˆ—è¡¨å±•ç¤º**

åœ¨"æŠ½å¥–åˆ—è¡¨"é¡µé¢ï¼š

- æ–°å¢"å¥–å“å›¾ç‰‡"åˆ—
- æ˜¾ç¤º 60x60 çš„ç¼©ç•¥å›¾
- ç‚¹å‡»å›¾ç‰‡å¯æŸ¥çœ‹å¤§å›¾
- æ— å›¾ç‰‡æ˜¾ç¤º"æ— å›¾ç‰‡"

### 3ï¸âƒ£ **æŠ½å¥–è¯¦æƒ…å±•ç¤º**

åœ¨"æŠ½å¥–è¯¦æƒ…"é¡µé¢ï¼š

- åŸºæœ¬ä¿¡æ¯ä¸­æ˜¾ç¤º"å¥–å“å›¾ç‰‡"å­—æ®µ
- æ˜¾ç¤º 150x150 çš„å›¾ç‰‡
- ç‚¹å‡»å¯ä»¥æ”¾å¤§æŸ¥çœ‹
- æ— å›¾ç‰‡æ˜¾ç¤º"æ— å›¾ç‰‡"

### 4ï¸âƒ£ **ä¸­å¥–é€šçŸ¥æºå¸¦å›¾ç‰‡**

ç”¨æˆ·ä¸­å¥–æ—¶ï¼š

- **æœ‰å›¾ç‰‡**ï¼šå‘é€å¸¦å›¾ç‰‡çš„ Telegram æ¶ˆæ¯ï¼ˆä½¿ç”¨ sendPhoto APIï¼‰
- **æ— å›¾ç‰‡**ï¼šåªå‘é€æ–‡å­—æ¶ˆæ¯ï¼ˆä½¿ç”¨ sendMessage APIï¼‰

---

## ğŸ”§ æŠ€æœ¯å®ç°

### åç«¯ï¼ˆDjangoï¼‰

#### 1. æ•°æ®åº“å­—æ®µ

```python
# backend/lottery/models.py
class Lottery(models.Model):
    # ... å…¶ä»–å­—æ®µ ...
    prize_image = models.ImageField(
        upload_to='prizes/',  # ä¸Šä¼ åˆ° media/prizes/ ç›®å½•
        null=True,            # å…è®¸ä¸ºç©º
        blank=True,           # è¡¨å•å¯ä»¥ä¸å¡«
        verbose_name='å¥–å“å›¾ç‰‡'
    )
```

#### 2. åºåˆ—åŒ–å™¨

```python
# backend/lottery/serializers.py
class LotteryCreateSerializer(serializers.ModelSerializer):
    class Meta:
        model = Lottery
        fields = [
            'title', 'description', 'prize_name', 'prize_count', 'prize_image',  # â† åŒ…å«å›¾ç‰‡å­—æ®µ
            'max_participants', 'start_time', 'end_time'
        ]
```

#### 3. åª’ä½“æ–‡ä»¶é…ç½®

```python
# backend/lottery_backend/settings.py
MEDIA_URL = 'media/'
MEDIA_ROOT = BASE_DIR / 'media'

# æ”¯æŒæ–‡ä»¶ä¸Šä¼ çš„ Parser
REST_FRAMEWORK = {
    'DEFAULT_PARSER_CLASSES': [
        'rest_framework.parsers.JSONParser',
        'rest_framework.parsers.MultiPartParser',  # â† æ–‡ä»¶ä¸Šä¼ 
        'rest_framework.parsers.FormParser',       # â† è¡¨å•æ•°æ®
    ],
}
```

#### 4. URL é…ç½®

```python
# backend/lottery_backend/urls.py
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    # ...
]

# å¼€å‘ç¯å¢ƒä¸‹æä¾›åª’ä½“æ–‡ä»¶æœåŠ¡
if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```

#### 5. é€šçŸ¥é€»è¾‘

```python
# backend/lottery/models.py
def _send_winner_notifications(self, winner_users):
    for user in winner_users:
        message = "ğŸ‰ æ­å–œæ‚¨ä¸­å¥–å•¦ï¼..."
        
        # å¦‚æœæœ‰å›¾ç‰‡ï¼Œå‘é€å›¾ç‰‡æ¶ˆæ¯
        if self.prize_image:
            url = f'https://api.telegram.org/bot{bot_token}/sendPhoto'
            data = {
                'chat_id': user.telegram_id,
                'photo': f"http://localhost:8000{self.prize_image.url}",  # å›¾ç‰‡ URL
                'caption': message,  # å›¾ç‰‡è¯´æ˜
                'parse_mode': 'HTML'
            }
        else:
            # åªå‘é€æ–‡å­—
            url = f'https://api.telegram.org/bot{bot_token}/sendMessage'
            data = {
                'chat_id': user.telegram_id,
                'text': message,
                'parse_mode': 'HTML'
            }
        
        requests.post(url, json=data, timeout=10)
```

---

### å‰ç«¯ï¼ˆVue + Element Plusï¼‰

#### 1. åˆ›å»ºæŠ½å¥–é¡µé¢

```vue
<!-- frontend/src/views/CreateLottery.vue -->
<template>
  <el-form-item label="å¥–å“å›¾ç‰‡" prop="prize_image">
    <el-upload
      class="prize-image-uploader"
      :action="uploadUrl"
      :show-file-list="false"
      :on-success="handleImageSuccess"
      :before-upload="beforeImageUpload"
      accept="image/*"
    >
      <!-- é¢„è§ˆå›¾ç‰‡ -->
      <img v-if="imageUrl" :src="imageUrl" class="prize-image" />
      <!-- ä¸Šä¼ å›¾æ ‡ -->
      <el-icon v-else class="prize-image-uploader-icon"><Plus /></el-icon>
    </el-upload>
    <div class="upload-tip">æ”¯æŒjpgã€pngæ ¼å¼ï¼Œå¤§å°ä¸è¶…è¿‡5MBï¼ˆéå¿…å¡«ï¼‰</div>
  </el-form-item>
</template>

<script>
export default {
  methods: {
    // ä¸Šä¼ å‰æ ¡éªŒ
    beforeImageUpload(file) {
      const isImage = file.type.startsWith('image/')
      const isLt5M = file.size / 1024 / 1024 < 5

      if (!isImage) {
        this.$message.error('åªèƒ½ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ï¼')
        return false
      }
      if (!isLt5M) {
        this.$message.error('å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 5MBï¼')
        return false
      }
      
      // ä¿å­˜æ–‡ä»¶
      this.form.prize_image = file
      // ç”Ÿæˆé¢„è§ˆ
      this.imageUrl = URL.createObjectURL(file)
      
      return false  // é˜»æ­¢è‡ªåŠ¨ä¸Šä¼ 
    },
    
    // æäº¤è¡¨å•
    async submitForm() {
      // ä½¿ç”¨ FormData æ”¯æŒæ–‡ä»¶ä¸Šä¼ 
      const formData = new FormData()
      formData.append('title', this.form.title)
      formData.append('description', this.form.description)
      // ... å…¶ä»–å­—æ®µ ...
      
      // å¦‚æœæœ‰å›¾ç‰‡ï¼Œæ·»åŠ åˆ° FormData
      if (this.form.prize_image) {
        formData.append('prize_image', this.form.prize_image)
      }
      
      await api.createLottery(formData)
    }
  }
}
</script>

<style scoped>
.prize-image-uploader :deep(.el-upload) {
  border: 1px dashed #d9d9d9;
  border-radius: 6px;
  width: 178px;
  height: 178px;
  cursor: pointer;
  transition: all 0.3s;
}

.prize-image-uploader :deep(.el-upload:hover) {
  border-color: #1890ff;
}

.prize-image {
  width: 178px;
  height: 178px;
  object-fit: cover;
}
</style>
```

#### 2. API é…ç½®

```javascript
// frontend/src/api/index.js
createLottery(data) {
  // æ£€æŸ¥æ˜¯å¦ä¸º FormDataï¼ˆåŒ…å«æ–‡ä»¶ä¸Šä¼ ï¼‰
  const isFormData = data instanceof FormData
  return api.post('/lotteries/', data, {
    headers: isFormData ? { 'Content-Type': 'multipart/form-data' } : {}
  })
}
```

#### 3. æŠ½å¥–åˆ—è¡¨é¡µé¢

```vue
<!-- frontend/src/views/LotteryList.vue -->
<el-table-column label="å¥–å“å›¾ç‰‡" width="100">
  <template #default="scope">
    <el-image
      v-if="scope.row.prize_image"
      :src="getImageUrl(scope.row.prize_image)"
      :preview-src-list="[getImageUrl(scope.row.prize_image)]"
      fit="cover"
      style="width: 60px; height: 60px; border-radius: 4px; cursor: pointer;"
    />
    <span v-else style="color: #999;">æ— å›¾ç‰‡</span>
  </template>
</el-table-column>

<script>
export default {
  methods: {
    getImageUrl(imagePath) {
      if (imagePath.startsWith('http')) {
        return imagePath
      }
      return `http://localhost:8000${imagePath}`
    }
  }
}
</script>
```

#### 4. æŠ½å¥–è¯¦æƒ…é¡µé¢

```vue
<!-- frontend/src/views/LotteryDetail.vue -->
<el-descriptions-item label="å¥–å“å›¾ç‰‡" :span="2">
  <el-image
    v-if="lottery.prize_image"
    :src="getImageUrl(lottery.prize_image)"
    :preview-src-list="[getImageUrl(lottery.prize_image)]"
    fit="cover"
    style="width: 150px; height: 150px; border-radius: 8px; cursor: pointer;"
  />
  <span v-else style="color: #999;">æ— å›¾ç‰‡</span>
</el-descriptions-item>
```

---

## ğŸ“ æ–‡ä»¶å­˜å‚¨

### å­˜å‚¨ä½ç½®

```
tg_choujiang/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ media/              â† åª’ä½“æ–‡ä»¶æ ¹ç›®å½•
â”‚   â”‚   â””â”€â”€ prizes/         â† å¥–å“å›¾ç‰‡å­˜å‚¨ç›®å½•
â”‚   â”‚       â”œâ”€â”€ image1.jpg
â”‚   â”‚       â”œâ”€â”€ image2.png
â”‚   â”‚       â””â”€â”€ ...
â”‚   â””â”€â”€ ...
```

### è®¿é—® URL

- **å¼€å‘ç¯å¢ƒ**: `http://localhost:8000/media/prizes/image1.jpg`
- **ç”Ÿäº§ç¯å¢ƒ**: éœ€è¦é…ç½® Nginx æˆ– CDN æä¾›é™æ€æ–‡ä»¶æœåŠ¡

---

## ğŸ¨ UI æ•ˆæœ

### åˆ›å»ºæŠ½å¥–é¡µé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¥–å“å›¾ç‰‡                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚                 â”‚                â”‚
â”‚  â”‚     ğŸ“· +        â”‚  â† è™šçº¿æ¡†ï¼Œç‚¹å‡»ä¸Šä¼   â”‚
â”‚  â”‚                 â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚  æ”¯æŒjpgã€pngæ ¼å¼ï¼Œå¤§å°ä¸è¶…è¿‡5MBï¼ˆéå¿…å¡«ï¼‰â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¸Šä¼ åï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¥–å“å›¾ç‰‡                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚                 â”‚                â”‚
â”‚  â”‚   [å¥–å“å›¾ç‰‡]     â”‚  â† æ˜¾ç¤ºé¢„è§ˆ    â”‚
â”‚  â”‚                 â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚  æ”¯æŒjpgã€pngæ ¼å¼ï¼Œå¤§å°ä¸è¶…è¿‡5MBï¼ˆéå¿…å¡«ï¼‰â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ½å¥–åˆ—è¡¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
â”‚ ID   â”‚ æ ‡é¢˜     â”‚ å¥–å“å›¾ç‰‡â”‚ å¥–å“    â”‚... â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
â”‚ 1    â”‚ iPhone  â”‚ [å›¾ç‰‡] â”‚ iPhone  â”‚... â”‚
â”‚ 2    â”‚ ç°é‡‘    â”‚ æ— å›¾ç‰‡  â”‚ 1000å…ƒ  â”‚... â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
```

### Telegram é€šçŸ¥

**æœ‰å›¾ç‰‡æ—¶**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [å¥–å“å›¾ç‰‡]                   â”‚
â”‚                              â”‚
â”‚  ğŸ‰ æ­å–œæ‚¨ä¸­å¥–å•¦ï¼            â”‚
â”‚                              â”‚
â”‚  ğŸ“‹ æŠ½å¥–æ´»åŠ¨ï¼šiPhone 15 æŠ½å¥– â”‚
â”‚  ğŸ å¥–å“ï¼šiPhone 15 Pro Max  â”‚
â”‚  ğŸ“ è¯´æ˜ï¼š...                â”‚
â”‚                              â”‚
â”‚  è¯·è”ç³»ç®¡ç†å‘˜é¢†å–å¥–å“ï¼       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ— å›¾ç‰‡æ—¶**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‰ æ­å–œæ‚¨ä¸­å¥–å•¦ï¼            â”‚
â”‚                              â”‚
â”‚  ğŸ“‹ æŠ½å¥–æ´»åŠ¨ï¼šç°é‡‘æŠ½å¥–        â”‚
â”‚  ğŸ å¥–å“ï¼š1000å…ƒç°é‡‘         â”‚
â”‚  ğŸ“ è¯´æ˜ï¼š...                â”‚
â”‚                              â”‚
â”‚  è¯·è”ç³»ç®¡ç†å‘˜é¢†å–å¥–å“ï¼       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… æµ‹è¯•æ¸…å•

### åŠŸèƒ½æµ‹è¯•

- [ ] **ä¸Šä¼ å›¾ç‰‡**ï¼šé€‰æ‹©å›¾ç‰‡åèƒ½æ­£å¸¸é¢„è§ˆ
- [ ] **æ–‡ä»¶ç±»å‹æ ¡éªŒ**ï¼šä¸Šä¼ éå›¾ç‰‡æ–‡ä»¶æ—¶æç¤ºé”™è¯¯
- [ ] **æ–‡ä»¶å¤§å°æ ¡éªŒ**ï¼šä¸Šä¼ è¶…è¿‡ 5MB çš„å›¾ç‰‡æ—¶æç¤ºé”™è¯¯
- [ ] **åˆ›å»ºæŠ½å¥–**ï¼šå¸¦å›¾ç‰‡åˆ›å»ºæˆåŠŸï¼Œæ•°æ®åº“æ­£ç¡®ä¿å­˜
- [ ] **åˆ—è¡¨æ˜¾ç¤º**ï¼šæŠ½å¥–åˆ—è¡¨ä¸­æ­£ç¡®æ˜¾ç¤ºç¼©ç•¥å›¾
- [ ] **è¯¦æƒ…æ˜¾ç¤º**ï¼šæŠ½å¥–è¯¦æƒ…ä¸­æ­£ç¡®æ˜¾ç¤ºå¤§å›¾
- [ ] **å›¾ç‰‡é¢„è§ˆ**ï¼šç‚¹å‡»å›¾ç‰‡èƒ½æ”¾å¤§æŸ¥çœ‹
- [ ] **æ— å›¾ç‰‡æƒ…å†µ**ï¼šä¸ä¸Šä¼ å›¾ç‰‡ä¹Ÿèƒ½æ­£å¸¸åˆ›å»º
- [ ] **é€šçŸ¥æµ‹è¯•**ï¼šæœ‰å›¾ç‰‡æ—¶å‘é€ sendPhotoï¼Œæ— å›¾ç‰‡æ—¶å‘é€ sendMessage

### å…¼å®¹æ€§æµ‹è¯•

- [ ] **æµè§ˆå™¨å…¼å®¹**ï¼šChromeã€Firefoxã€Safariã€Edge
- [ ] **ç§»åŠ¨ç«¯é€‚é…**ï¼šæ‰‹æœºæµè§ˆå™¨æ­£å¸¸æ˜¾ç¤º
- [ ] **Telegram å®¢æˆ·ç«¯**ï¼šå›¾ç‰‡æ¶ˆæ¯æ­£å¸¸æ˜¾ç¤º

---

## ğŸ› å¸¸è§é—®é¢˜

### 1. å›¾ç‰‡ä¸Šä¼ åä¸æ˜¾ç¤ºï¼Ÿ

**åŸå› **ï¼šDjango åª’ä½“æ–‡ä»¶è·¯ç”±æœªé…ç½®

**è§£å†³**ï¼š
```python
# backend/lottery_backend/urls.py
if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```

### 2. å‰ç«¯æ˜¾ç¤ºå›¾ç‰‡ 404ï¼Ÿ

**åŸå› **ï¼šå›¾ç‰‡ URL æ‹¼æ¥é”™è¯¯

**è§£å†³**ï¼š
```javascript
getImageUrl(imagePath) {
  if (imagePath.startsWith('http')) {
    return imagePath
  }
  return `http://localhost:8000${imagePath}`  // ç¡®ä¿ä»¥ / å¼€å¤´
}
```

### 3. Telegram é€šçŸ¥å›¾ç‰‡ä¸æ˜¾ç¤ºï¼Ÿ

**åŸå› **ï¼šTelegram æ— æ³•è®¿é—® localhost

**è§£å†³**ï¼š
- **å¼€å‘ç¯å¢ƒ**ï¼šä½¿ç”¨å†…ç½‘ç©¿é€ï¼ˆngrokã€frpï¼‰
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šä½¿ç”¨å…¬ç½‘åŸŸå + Nginx

### 4. ä¸Šä¼ å¤§å›¾ç‰‡å¾ˆæ…¢ï¼Ÿ

**åŸå› **ï¼šæ–‡ä»¶å¤ªå¤§

**å»ºè®®**ï¼š
- å‰ç«¯æ·»åŠ å›¾ç‰‡å‹ç¼©ï¼ˆä½¿ç”¨ `compressorjs` åº“ï¼‰
- åç«¯æ·»åŠ å›¾ç‰‡ç¼©ç•¥å›¾ç”Ÿæˆï¼ˆä½¿ç”¨ Pillowï¼‰

---

## ğŸš€ ä¼˜åŒ–å»ºè®®

### 1. å›¾ç‰‡å‹ç¼©

```javascript
// å‰ç«¯å‹ç¼©
import Compressor from 'compressorjs'

beforeImageUpload(file) {
  return new Promise((resolve, reject) => {
    new Compressor(file, {
      quality: 0.8,
      maxWidth: 1024,
      maxHeight: 1024,
      success(result) {
        resolve(result)
      },
      error(err) {
        reject(err)
      }
    })
  })
}
```

### 2. ç¼©ç•¥å›¾ç”Ÿæˆ

```python
# åç«¯ç”Ÿæˆç¼©ç•¥å›¾
from PIL import Image
from io import BytesIO
from django.core.files.uploadedfile import InMemoryUploadedFile

def save(self, *args, **kwargs):
    if self.prize_image:
        # ç”Ÿæˆç¼©ç•¥å›¾
        img = Image.open(self.prize_image)
        img.thumbnail((300, 300))
        # ä¿å­˜ç¼©ç•¥å›¾
        # ...
    super().save(*args, **kwargs)
```

### 3. CDN åŠ é€Ÿ

```python
# ä½¿ç”¨ä¸ƒç‰›äº‘ã€é˜¿é‡Œäº‘ OSS ç­‰
MEDIA_URL = 'https://cdn.example.com/media/'
```

### 4. å›¾ç‰‡æ‡’åŠ è½½

```vue
<el-image
  :src="imageUrl"
  lazy
  :scroll-container="scrollContainer"
/>
```

---

## ğŸ“ æ€»ç»“

âœ… **å·²å®Œæˆ**ï¼š
- âœ… åç«¯ Model æ·»åŠ  `prize_image` å­—æ®µ
- âœ… åç«¯é…ç½®æ–‡ä»¶ä¸Šä¼ æ”¯æŒ
- âœ… åç«¯åª’ä½“æ–‡ä»¶è·¯ç”±é…ç½®
- âœ… å‰ç«¯åˆ›å»ºé¡µé¢æ·»åŠ å›¾ç‰‡ä¸Šä¼ 
- âœ… å‰ç«¯åˆ—è¡¨é¡µé¢æ˜¾ç¤ºå›¾ç‰‡
- âœ… å‰ç«¯è¯¦æƒ…é¡µé¢æ˜¾ç¤ºå›¾ç‰‡
- âœ… é€šçŸ¥æ¶ˆæ¯æºå¸¦å›¾ç‰‡

ğŸ¯ **åŠŸèƒ½ç‰¹ç‚¹**ï¼š
- âœ… éå¿…å¡«ï¼Œçµæ´»ä½¿ç”¨
- âœ… å®Œæ•´çš„æ–‡ä»¶æ ¡éªŒ
- âœ… ç¾è§‚çš„ UI è®¾è®¡
- âœ… å®Œå–„çš„é¢„è§ˆåŠŸèƒ½
- âœ… æ™ºèƒ½çš„é€šçŸ¥é€»è¾‘

ğŸš€ **ä¸‹ä¸€æ­¥**ï¼š
- è€ƒè™‘æ·»åŠ å›¾ç‰‡å‹ç¼©
- è€ƒè™‘ä½¿ç”¨ CDN åŠ é€Ÿ
- è€ƒè™‘æ·»åŠ å›¾ç‰‡è£å‰ªåŠŸèƒ½
- è€ƒè™‘æ·»åŠ å¤šå›¾ä¸Šä¼ ï¼ˆè½®æ’­å±•ç¤ºï¼‰

---

**æ–‡æ¡£æ›´æ–°æ—¶é—´**: 2025-10-25
