@echo off
chcp 65001 >nul
title Telegram Lottery Bot System - Multi-Tenant Mode (Hot Reload)
cls

echo ============================================================
echo   ðŸŽ‰ Telegram æŠ½å¥–ç³»ç»Ÿ - å¤šç§Ÿæˆ·æ¨¡å¼ (çƒ­é‡è½½)
echo ============================================================
echo.
echo ðŸ’¡ æœ¬å¯åŠ¨è„šæœ¬å°†å¯åŠ¨ä»¥ä¸‹æœåŠ¡ï¼š
echo    1. Django åŽç«¯ API æœåŠ¡å™¨
echo    2. Vue å‰ç«¯ç®¡ç†ç•Œé¢
echo    3. å¤šç§Ÿæˆ· Bot ç¨‹åº (æ”¯æŒçƒ­é‡è½½)
echo    4. è‡ªåŠ¨å¼€å¥–å®ˆæŠ¤è¿›ç¨‹
echo.
echo âš¡ ç‰¹æ€§ï¼š
echo    âœ“ æ”¯æŒå¤šä¸ªç§Ÿæˆ·åŒæ—¶ä½¿ç”¨
echo    âœ“ æ¯ä¸ªç§Ÿæˆ·é…ç½®è‡ªå·±çš„ Bot Token
echo    âœ“ çƒ­é‡è½½ï¼šé…ç½®åŽè‡ªåŠ¨å¯åŠ¨ Bot
echo    âœ“ æ•°æ®å®Œå…¨éš”ç¦»
echo.
echo ============================================================
echo.

echo [1/4] ðŸš€ å¯åŠ¨åŽç«¯æœåŠ¡å™¨...
start "Backend API Server" cmd /k "cd /d %~dp0backend && echo åŽç«¯æœåŠ¡å™¨å¯åŠ¨ä¸­... && python -u manage.py runserver 0.0.0.0:8000 --noreload"
timeout /t 3 /nobreak >nul

echo [2/4] ðŸŽ¨ å¯åŠ¨å‰ç«¯ç®¡ç†ç•Œé¢...
start "Frontend Admin Panel" cmd /k "cd /d %~dp0frontend && echo å‰ç«¯ç•Œé¢å¯åŠ¨ä¸­... && npm run serve"
timeout /t 3 /nobreak >nul

echo [3/4] ðŸ¤– å¯åŠ¨å¤šç§Ÿæˆ·Botç¨‹åº (çƒ­é‡è½½æ¨¡å¼)...
start "Multi-Tenant Bot (Hot Reload)" cmd /k "cd /d %~dp0bot && echo å¤šç§Ÿæˆ·Botå¯åŠ¨ä¸­ (çƒ­é‡è½½æ¨¡å¼)... && echo. && echo ðŸ’¡ æç¤ºï¼šBotä¼šè‡ªåŠ¨ç›‘æŽ§é…ç½®å˜åŒ– && echo    - æ–°å¢žé…ç½® â†’ è‡ªåŠ¨å¯åŠ¨Bot && echo    - ä¿®æ”¹Token â†’ è‡ªåŠ¨é‡å¯Bot && echo    - ç¦ç”¨é…ç½® â†’ è‡ªåŠ¨åœæ­¢Bot && echo. && python multi_tenant_bot.py"
timeout /t 3 /nobreak >nul

echo [4/4] â° å¯åŠ¨è‡ªåŠ¨å¼€å¥–å®ˆæŠ¤è¿›ç¨‹...
start "Auto Draw Scheduler" cmd /k "cd /d %~dp0backend && echo è‡ªåŠ¨å¼€å¥–å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨ä¸­... && python auto_draw_daemon.py"
timeout /t 2 /nobreak >nul

echo.
echo ============================================================
echo   âœ… æ‰€æœ‰æœåŠ¡å·²æˆåŠŸå¯åŠ¨ï¼
echo ============================================================
echo.
echo ðŸ“‹ å·²æ‰“å¼€ 4 ä¸ªæœåŠ¡çª—å£ï¼Œè¯·ä¸è¦å…³é—­å®ƒä»¬ï¼š
echo.
echo   [çª—å£1] Backend API Server
echo   [çª—å£2] Frontend Admin Panel  
echo   [çª—å£3] Multi-Tenant Bot (çƒ­é‡è½½)
echo   [çª—å£4] Auto Draw Scheduler
echo.
echo ============================================================
echo.
echo ðŸŒ è®¿é—®åœ°å€ï¼š
echo   â€¢ å‰ç«¯ç®¡ç†ç•Œé¢: http://localhost:8080
echo   â€¢ åŽç«¯ API:     http://localhost:8000/api
echo   â€¢ Django ç®¡ç†:  http://localhost:8000/admin
echo.
echo ============================================================
echo.
echo ðŸ“ é¦–æ¬¡ä½¿ç”¨æ­¥éª¤ï¼š
echo.
echo   1ï¸âƒ£  è®¿é—® http://localhost:8080
echo   2ï¸âƒ£  ç™»å½•æ‚¨çš„è´¦å· (æ²¡æœ‰è¯·å…ˆæ³¨å†Œ)
echo   3ï¸âƒ£  ç‚¹å‡»å¯¼èˆªæ çš„ "Boté…ç½®"
echo   4ï¸âƒ£  é…ç½®æ‚¨çš„ Telegram Bot Token
echo   5ï¸âƒ£  ä¿å­˜åŽ 10ç§’å†… Bot ä¼šè‡ªåŠ¨å¯åŠ¨ âœ¨
echo.
echo ============================================================
echo.
echo ðŸ”¥ çƒ­é‡è½½åŠŸèƒ½è¯´æ˜Žï¼š
echo.
echo   â€¢ Botç¨‹åºå¯åŠ¨åŽä¼šæŒç»­ç›‘æŽ§æ•°æ®åº“é…ç½®
echo   â€¢ å³ä½¿å¯åŠ¨æ—¶æ²¡æœ‰é…ç½® Tokenï¼Œä¹Ÿä¼šè‡ªåŠ¨ç­‰å¾…
echo   â€¢ é…ç½®åŽ 10ç§’å†…è‡ªåŠ¨å¯åŠ¨å¯¹åº”çš„ Bot
echo   â€¢ ä¿®æ”¹é…ç½® 10ç§’å†…è‡ªåŠ¨é‡å¯ Bot
echo   â€¢ ç¦ç”¨é…ç½® 10ç§’å†…è‡ªåŠ¨åœæ­¢ Bot
echo   â€¢ å®Œå…¨ä¸éœ€è¦æ‰‹åŠ¨é‡å¯ Bot ç¨‹åºï¼
echo.
echo ============================================================
echo.
echo âš ï¸  æ³¨æ„äº‹é¡¹ï¼š
echo.
echo   â€¢ é¦–æ¬¡å¯åŠ¨å‰ç«¯å¯èƒ½éœ€è¦ç­‰å¾… 1-2 åˆ†é’Ÿ (npm ç¼–è¯‘)
echo   â€¢ ç¡®ä¿ç«¯å£ 8080 å’Œ 8000 æœªè¢«å ç”¨
echo   â€¢ å¦‚éœ€åœæ­¢æœåŠ¡ï¼Œç›´æŽ¥å…³é—­å¯¹åº”çª—å£å³å¯
echo   â€¢ åœæ­¢æ‰€æœ‰æœåŠ¡ï¼šå…³é—­æ‰€æœ‰æ‰“å¼€çš„çª—å£
echo.
echo ============================================================
echo.
echo ðŸ“– è¯¦ç»†æ–‡æ¡£ï¼š
echo   â€¢ å¤šç§Ÿæˆ·Botå¯åŠ¨æŒ‡å—.md
echo   â€¢ Botçƒ­é‡è½½åŠŸèƒ½è¯´æ˜Ž.md
echo   â€¢ ç”¨æˆ·ç®¡ç†æŒ‡å—.md
echo.
echo ============================================================
echo.
echo ðŸŽŠ å‡†å¤‡å°±ç»ªï¼å¼€å§‹ä½¿ç”¨å§ï¼
echo.
echo æŒ‰ä»»æ„é”®å…³é—­æ­¤çª—å£...
echo (å…³é—­æ­¤çª—å£ä¸ä¼šå½±å“æœåŠ¡è¿è¡Œ)
echo.
pause >nul

